<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="stylesheet" href="style.css">
		<script async src="code.js"></script>
		<title>esp32-wifi-manager</title>
	</head>
	<body>
		<script>
			function showForm(formType) {
				document.getElementById('open').style.display = 'none';
				document.getElementById('wpa').style.display = 'none';
				document.getElementById('eap').style.display = 'none';
				document.getElementById('wpa2man').style.display = 'none';
				document.getElementById('eapman').style.display = 'none';
				document.getElementById(formType).style.display = 'block';

				if (formType == 'wpa2man') {
					document.getElementById('manual_wpa_ssid').focus();
					document.getElementById('manual_wpa_ssid').value = document.getElementById('manual_eap_ssid').value;
					document.getElementById('manual_wpa_pwd').value = document.getElementById('manual_eap_pwd').value;
				} else if (formType == 'eapman') {
					document.getElementById('manual_eap_username').focus();
					document.getElementById('manual_eap_ssid').value = document.getElementById('manual_wpa_ssid').value;
					document.getElementById('manual_eap_pwd').value = document.getElementById('manual_wpa_pwd').value;
				}
			}
		</script>
		<div id="app">
			<div id="app-wrap">
				<div id="wifi">
					<header>
						<h1>Wi-Fi Setting</h1>
					</header>
					<div id="wifi-status">
						<h2>Connected to:</h2>
						<section id="connected-to">
							<div class="ape"><div class="w0"><div class="pw"><span></span></div></div></div>
						</section>
					</div>
					<h2>Manual connect</h2>
					<section id="manual_add">
					<div class="ape">ADD (HIDDEN) SSID<div>
					</section>
					<h2>or choose a network...</h2>
					<section id="wifi-list">
					</section>
					Scanning... Please Wait!
					<p></p>
					<!-- <div id="scan_prompt"><em>Scanning...Please Wait! </em></div> -->
					<!-- <div id="emptybar"><em>.</em></div> -->
					<div id="pwrdby"><em>Powered by SmartPowerPlug </em><a id="acredits" href="#" style="display: none;"><strong>Wifi-Manager</strong></a>.</div>
				</div>
				<div id="connect_manual">
					<header>
						<h1>Enter Details</h1>
					</header>
					<h2>Manual Connection</span></h2>
<!--					<div class="selection">-->
<!--						<p>Select WiFi Connection</p>-->
<!--						<button id="manual_wpa2button" onclick="showForm('wpa2man')">WPA2/WPA3</button>-->
<!--						<button id="manual_eapbutton" onclick="showForm('eapman')">EAP</button>-->
<!--					</div>-->
					<div id="wpa2man">
						<input id="manual_wpa_ssid" type="text" placeholder="SSID" value="">
						<input id="manual_wpa_pwd" type="text" placeholder="Password" value="">
						<div style="display: flex;">
							<input id="manual_eapbutton" type="button" value="Username" data-connect="manualwpa" onclick="showForm('eapman')" />
						</div>
						<div class="buttons">
							<input id="manual_join_wpa" type="button" value="Join" data-connect="manualwpa" />
							<input id="manual_cancel_wpa" type="button" value="Cancel"/>
						</div>
					</div>
					<div id="eapman">
						<input id="manual_eap_ssid" type="text" placeholder="SSID" value="">
<!--						<input id="manual_eap_username" type="text" placeholder="Username" value="">-->
						<input id="manual_eap_pwd" type="text" placeholder="Password" value="">
						<div style="display: flex; gap: 10px;">
							<input id="manual_eap_username" type="text" placeholder="Username" value="">
							<input id="manual_wpa2button" type="button" value="Hide" data-connect="manualwpa" onclick="showForm('wpa2man')" />
						</div>
						<div class="buttons">
							<input id="manual_join_eap" type="button" value="Join" data-connect="manualeap" />
							<input id="manual_cancel_eap" type="button" value="Cancel"/>
						</div>
					</div>
				</div>

				
				<div id="connect">
					<p style="text-align: center; font-weight: bold"><span id="wpa_ssid-pwd"></span></p>
<!--					<div class="selection">-->
<!--						<p>Select WiFi Connection</p>-->
<!--						<button id="wpa2button" onclick="showForm('wpa')">WPA2/WPA3</button>-->
<!--						<button id="eapbutton" onclick="showForm('eap')">EAP</button>-->
<!--					</div>-->

					<div id="open">
						<h2>This is an open network. Are you sure you want to join?</h2>
						<div class="buttons">
							<input id="join_open" type="button" value="Join" />
							<input id="cancel_open" type="button" value="Cancel"/>
						</div>
					</div>

					<div id="wpa">
						<h2>Password</h2>
						<section>
							<input id="wpa_pwd" type="text" placeholder="Password" value="">
						</section>
						<div class="buttons">
							<input id="join_wpa" type="button" value="Join" />
							<input id="cancel_wpa" type="button" value="Cancel"/>
						</div>
					</div>

					
					<div id="eap">
						<h2>Username for <span id="eap_ssid-pwd"></span></h2>
						<section>
							<input id="eap_username" type="text" placeholder="Username" value="">
						</section>
						<h2>Password</h2>
						<section>
							<input id="eap_pwd" type="text" placeholder="Password" value="">
						</section>
						<div class="buttons">
							<input id="join_eap" type="button" value="Join" />
							<input id="cancel_eap" type="button" value="Cancel"/>
						</div>
					</div>
				</div>
				<div id="connect-wait">
					<header>
						<h1>Please wait...</h1>
					</header>
					<h2>Connecting to <span id="ssid-wait"></span></h2>
					<section>
						<div id="loading">
							<div class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>
							<p class="tctr">You may lose wifi access while the esp32 recalibrates its radio. Please wait until your device automatically reconnects. Which can take up to 30s.</p>
						</div>
						<div id="connect-success">
							<h3 class="gr">Success!</h3>
						</div>
						<div id="connect-fail">
							<h3 class="rd">Connection failed</h3>
							<p class="tctr">Please double-check wifi password if any and make sure the access point has good signal.</p>
						</div>
					</section>
					<div class="buttons">
						<input id="ok-connect" type="button" value="OK" class="ctr" />
					</div>
				</div>
				<div id="connect-details">
					<div id="connect-details-wrap">
						<header>
							<h1></h1>
						</header>
						<h2></h2>
						<section>
							<div class="buttons">
								<input id="disconnect" type="button" value="Disconnect" class="ctr"/>
							</div>
						</section>
						<h2>IP Address</h2>
						<section>
							<div class="ape brdb">IP Address:<div id="ip" class="fr"></div></div>
							<div class="ape brdb">Subnet Mask:<div id="netmask" class="fr"></div></div>
							<div class="ape">Default Gateway:<div id="gw" class="fr"></div></div>
						</section>
						<div class="buttons">
							<input id="ok-details" type="button" value="OK" class="ctr" />
						</div>
					</div>					
					<div id="diag-disconnect" class="diag-box">
						<div class="diag-box-win">
							<p>Are you sure you would like to disconnect from this wifi?</p>
							<div class="buttons">
								<input id="no-disconnect" type="button" value="No" />
								<input id="yes-disconnect" type="button" value="Yes" />
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="credits">
			<header>
				<h1>About this app...</h1>
			</header>
			<h2></h2>
			<section>
				<p><strong>esp32-wifi-manager</strong>, &copy; 2017-2020, Tony Pottier<br />Licended under the MIT License.</p>
				<p>
					This app would not be possible without the following libraries:
				</p>
				<ul>
					<li>SpinKit, &copy;  2015, Tobias Ahlin. Licensed under the MIT License.</li>
					<li>jQuery, The jQuery Foundation. Licensed under the MIT License.</li>
					<li>cJSON, &copy; 2009-2017, Dave Gamble and cJSON contributors. Licensed under the MIT License.</li>
				</ul>
			</section>
			<div class="buttons">
				<input id="ok-credits" type="button" value="OK" class="ctr" />
			</div>
		</div>
	</body>
<html>
